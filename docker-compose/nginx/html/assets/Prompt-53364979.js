import{d as g,ad as w,h as m,a4 as C,r as b,I as x,M as N,a6 as r,a5 as u,K as e,aa as I,a8 as R,a7 as S,a0 as B,Y as P,N as _,am as k,bJ as M,bV as V}from"./index-e3efa2fd.js";const A=g({__name:"Prompt",props:{visible:{type:Boolean},roomId:null},emits:["update:visible"],setup(d,{emit:f}){var c;const i=d,v=w(),t=m(()=>v.getChatHistoryByCurrentActive),p=C(),l=b(!1),h=`Prompt For [${(c=t.value)==null?void 0:c.title}]`,s=m({get(){return i.visible},set(a){f("update:visible",a)}});async function y(){if(!(!t.value||!t.value)){l.value=!0;try{const{message:a}=await V(t.value.prompt??"",+i.roomId);p.success(a),s.value=!1}catch(a){p.error(a.message)}l.value=!1}}return(a,o)=>(x(),N(e(M),{show:e(s),"onUpdate:show":o[1]||(o[1]=n=>k(s)?s.value=n:null),"auto-focus":!1,class:"custom-card",preset:"card",style:{width:"600px"},title:h,size:"huge",bordered:!1},{footer:r(()=>[u(e(I),{justify:"end"},{default:r(()=>[u(e(R),{loading:l.value,type:"success",onClick:y},{default:r(()=>[S(B(e(P)("common.save")),1)]),_:1},8,["loading"])]),_:1})]),default:r(()=>[u(e(_),{value:e(t)&&e(t).prompt,type:"textarea",autosize:{minRows:4,maxRows:10},placeholder:"Prompt for this room, If empty will use Settings ->  Advanced -> Role",onInput:o[0]||(o[0]=n=>{e(t)&&(e(t).prompt=n)})},null,8,["value"])]),_:1},8,["show"]))}});export{A as default};
